var el1=document.getElementById("prename");var el2=document.getElementById("name");var el3=document.getElementById("reflink");var el4=document.getElementById("e-mail");var el5=document.getElementById("agv");var el6=document.getElementById("sponsor");function input(a){if(a.value.length>0){setClass(a,"is-invalid","is-valid")}else{setClass(a,"is-valid","is-invalid")}}function inputbtn(a){if(a.checked){setClass(a,"is-invalid","is-valid")}else{setClass(a,"is-valid","is-invalid")}}function setClass(e,a,f){var g=e.className.split(" ");for(var d=0;d<g.length;d++){if(g[d]==a){g[d]=f}}var c="";for(var b=0;b<g.length;b++){c+=g[b]+" "}e.className=c}function setTravelbtn(a){var b=document.getElementById("sendMessageButton");if(a){b.removeAttribute("disabled")}else{var c=document.createAttribute("disabled");b.setAttributeNode(c)}}function count(){return getAllTagsWithValueAttribute("class","is-invalid").length}setInterval(function(){input(el1);input(el2);input(el3);input(el4);inputbtn(el5);input(el6);if(count()<=0){setTravelbtn(true)}else{setTravelbtn(false)}},100);$(function(){function a(b){if(b.result=="success"){$("form#reused_form").hide();$("#success_message").show();$("#error_message").hide()}else{$("#error_message").append("<ul></ul>");jQuery.each(b.errors,function(c,d){$("#error_message ul").append("<li>"+c+":"+d+"</li>")});$("#success_message").hide();$("#error_message").show();$('button[type="button"]',$form).each(function(){$btn=$(this);label=$btn.prop("orig_label");if(label){$btn.prop("type","submit");$btn.text(label);$btn.prop("orig_label","")}})}}$("#reused_form").submit(function(b){b.preventDefault();$form=$(this);$('button[type="submit"]',$form).each(function(){$btn=$(this);$btn.prop("type","button");$btn.prop("orig_label",$btn.text());$btn.text("Sending ...")});$.ajax({type:"POST",url:"handler.php",data:$form.serialize(),success:a,dataType:"json"})})});